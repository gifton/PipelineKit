{"primaryContentSections":[{"declarations":[{"platforms":["macOS"],"tokens":[{"kind":"keyword","text":"final"},{"kind":"text","text":" "},{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"SemaphoreToken"}],"languages":["swift"]}],"kind":"declarations"},{"kind":"content","content":[{"text":"Overview","anchor":"overview","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"SemaphoreToken"},{"type":"text","text":" provides safe, automatic resource management for semaphore acquisitions."},{"type":"text","text":" "},{"type":"text","text":"The token releases its resource when deinitialized, preventing resource leaks even if"},{"type":"text","text":" "},{"type":"text","text":"tasks are cancelled or errors occur."}]},{"text":"Design","anchor":"Design","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"This token uses a closure-based approach that allows different semaphore implementations","type":"text"},{"text":" ","type":"text"},{"text":"to provide their own release logic while maintaining a unified token type in Core:","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Automatic Cleanup"}],"type":"strong"},{"text":": Resources are released even if tasks are cancelled","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Prevents Double-Release"}]},{"type":"text","text":": The token tracks its release state atomically"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Implementation Agnostic"}]},{"type":"text","text":": Works with any semaphore via the release handler"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Memory Safe"}]},{"type":"text","text":": No retain cycles when using weak captures"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"Example","anchor":"Example","type":"heading","level":2},{"syntax":"swift","type":"codeListing","code":["let token = await semaphore.acquire()","\/\/ Use the resource...","token.release() \/\/ Explicit release","\/\/ Or let it auto-release when token goes out of scope"]}]}],"relationshipsSections":[{"title":"Conforms To","type":"conformsTo","identifiers":["doc:\/\/PipelineKit\/s8CopyableP","doc:\/\/PipelineKit\/s23CustomStringConvertibleP","doc:\/\/PipelineKit\/s8SendableP"],"kind":"relationships"}],"hierarchy":{"paths":[["doc:\/\/PipelineKit\/documentation\/PipelineKit"]]},"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"url":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken","interfaceLanguage":"swift"},"kind":"symbol","topicSections":[{"anchor":"Initializers","generated":true,"title":"Initializers","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/init(releaseHandler:)"]},{"anchor":"Instance-Properties","generated":true,"title":"Instance Properties","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/holdDuration","doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/isReleased"]},{"anchor":"Instance-Methods","generated":true,"title":"Instance Methods","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/release()"]},{"anchor":"Default-Implementations","generated":true,"title":"Default Implementations","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/CustomStringConvertible-Implementations"]}],"sections":[],"abstract":[{"type":"text","text":"A token representing an acquired semaphore resource that automatically releases on cleanup."}],"metadata":{"symbolKind":"class","externalID":"s:11PipelineKit14SemaphoreTokenC","navigatorTitle":[{"kind":"identifier","text":"SemaphoreToken"}],"roleHeading":"Class","role":"symbol","modules":[{"name":"PipelineKit"}],"title":"SemaphoreToken","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SemaphoreToken","kind":"identifier"}]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/pipelinekit\/semaphoretoken"]}],"references":{"doc://PipelineKit/s8SendableP":{"type":"unresolvable","title":"Swift.Sendable","identifier":"doc:\/\/PipelineKit\/s8SendableP"},"doc://PipelineKit/documentation/PipelineKit/SemaphoreToken/init(releaseHandler:)":{"fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"releaseHandler"},{"kind":"text","text":": () -> "},{"preciseIdentifier":"s:s4Voida","text":"Void","kind":"typeIdentifier"},{"text":")","kind":"text"}],"role":"symbol","abstract":[{"text":"Creates a new semaphore token with a custom release handler.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/init(releaseHandler:)","title":"init(releaseHandler:)","type":"topic","url":"\/documentation\/pipelinekit\/semaphoretoken\/init(releasehandler:)"},"doc://PipelineKit/documentation/PipelineKit/SemaphoreToken/release()":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"release"},{"kind":"text","text":"()"}],"abstract":[{"type":"text","text":"Explicitly releases the semaphore resource."}],"url":"\/documentation\/pipelinekit\/semaphoretoken\/release()","kind":"symbol","role":"symbol","type":"topic","title":"release()","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/release()"},"doc://PipelineKit/s8CopyableP":{"title":"Swift.Copyable","type":"unresolvable","identifier":"doc:\/\/PipelineKit\/s8CopyableP"},"doc://PipelineKit/documentation/PipelineKit":{"role":"collection","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit","title":"PipelineKit","url":"\/documentation\/pipelinekit","abstract":[],"type":"topic","kind":"symbol"},"doc://PipelineKit/documentation/PipelineKit/SemaphoreToken":{"type":"topic","url":"\/documentation\/pipelinekit\/semaphoretoken","title":"SemaphoreToken","role":"symbol","navigatorTitle":[{"text":"SemaphoreToken","kind":"identifier"}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken","abstract":[{"type":"text","text":"A token representing an acquired semaphore resource that automatically releases on cleanup."}],"kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SemaphoreToken","kind":"identifier"}]},"doc://PipelineKit/s23CustomStringConvertibleP":{"type":"unresolvable","title":"Swift.CustomStringConvertible","identifier":"doc:\/\/PipelineKit\/s23CustomStringConvertibleP"},"doc://PipelineKit/documentation/PipelineKit/SemaphoreToken/holdDuration":{"url":"\/documentation\/pipelinekit\/semaphoretoken\/holdduration","title":"holdDuration","kind":"symbol","type":"topic","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"holdDuration","kind":"identifier"},{"text":": ","kind":"text"},{"text":"TimeInterval","kind":"typeIdentifier","preciseIdentifier":"c:@T@NSTimeInterval"}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/holdDuration","abstract":[{"type":"text","text":"How long this token has held the resource."}],"role":"symbol"},"doc://PipelineKit/documentation/PipelineKit/SemaphoreToken/CustomStringConvertible-Implementations":{"kind":"article","title":"CustomStringConvertible Implementations","url":"\/documentation\/pipelinekit\/semaphoretoken\/customstringconvertible-implementations","abstract":[],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/CustomStringConvertible-Implementations","role":"collectionGroup","type":"topic"},"doc://PipelineKit/documentation/PipelineKit/SemaphoreToken/isReleased":{"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"isReleased","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"}],"role":"symbol","abstract":[{"text":"Whether this token has been released.","type":"text"}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/SemaphoreToken\/isReleased","title":"isReleased","kind":"symbol","type":"topic","url":"\/documentation\/pipelinekit\/semaphoretoken\/isreleased"}}}