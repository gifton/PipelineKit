{"abstract":[{"text":"A thread-safe dynamic pipeline that routes commands to their handlers with middleware support.","type":"text"}],"identifier":{"url":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline","interfaceLanguage":"swift"},"variants":[{"paths":["\/documentation\/pipelinekit\/dynamicpipeline"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"patch":0,"minor":3,"major":0},"metadata":{"navigatorTitle":[{"kind":"identifier","text":"DynamicPipeline"}],"externalID":"s:11PipelineKit07DynamicA0C","title":"DynamicPipeline","role":"symbol","modules":[{"name":"PipelineKit"}],"fragments":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DynamicPipeline","kind":"identifier"}],"roleHeading":"Class","symbolKind":"class"},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"tokens":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DynamicPipeline","kind":"identifier"}],"languages":["swift"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"The dynamic pipeline provides a centralized mechanism for executing commands by:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Routing commands to registered handlers based on type at runtime"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Applying middleware for cross-cutting concerns","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Managing retries and circuit breaking for resilience"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Ensuring thread-safe command execution using actor isolation","type":"text"}]}]}]},{"anchor":"Architecture","level":2,"type":"heading","text":"Architecture"},{"type":"paragraph","inlineContent":[{"text":"The dynamic pipeline follows a service locator pattern:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"text":"Command is sent to the pipeline","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Pipeline looks up the registered handler at runtime"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Middleware chain is constructed and executed"}]}]},{"content":[{"inlineContent":[{"text":"Handler processes the command","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Result flows back through middleware","type":"text"}],"type":"paragraph"}]}]},{"anchor":"Thread-Safety","level":2,"type":"heading","text":"Thread Safety"},{"type":"paragraph","inlineContent":[{"text":"As an actor, all operations are automatically serialized, ensuring thread-safe","type":"text"},{"text":" ","type":"text"},{"text":"access to the handler registry and middleware collection.","type":"text"}]},{"anchor":"Example","level":2,"type":"heading","text":"Example"},{"type":"codeListing","code":["let pipeline = DynamicPipeline()","","\/\/ Register handlers","try await pipeline.register(CreateUserCommand.self, handler: CreateUserHandler())","try await pipeline.register(UpdateUserCommand.self, handler: UpdateUserHandler())","","\/\/ Add middleware","try pipeline.addMiddleware(AuthenticationMiddleware())","try pipeline.addMiddleware(ValidationMiddleware())","try pipeline.addMiddleware(LoggingMiddleware())","","\/\/ Send commands","let user = try await pipeline.send(","    CreateUserCommand(email: \"user@example.com\", name: \"John\"),","    retryPolicy: .exponentialBackoff(maxAttempts: 3)",")"],"syntax":"swift"},{"type":"aside","style":"note","name":"See Also","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"codeVoice","code":"Command"},{"type":"text","text":", "},{"type":"codeVoice","code":"CommandHandler"},{"type":"text","text":", "},{"type":"codeVoice","code":"Middleware"},{"type":"text","text":", "},{"type":"codeVoice","code":"RetryPolicy"}]}]}]}],"relationshipsSections":[{"kind":"relationships","identifiers":["doc:\/\/PipelineKit\/s8SendableP","doc:\/\/PipelineKit\/ScA"],"title":"Conforms To","type":"conformsTo"}],"sections":[],"topicSections":[{"generated":true,"title":"Initializers","anchor":"Initializers","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/init()"]},{"generated":true,"title":"Instance Properties","anchor":"Instance-Properties","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/middlewareCount","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/middlewareTypes","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/registeredCommandTypes"]},{"generated":true,"title":"Instance Methods","anchor":"Instance-Methods","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/addMiddleware(_:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/addMiddlewares(_:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/clear()","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/clearMiddlewares()","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/hasHandler(for:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/hasMiddleware(ofType:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/register(_:handler:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/registerOnce(_:handler:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/replace(_:with:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/send(_:context:retryPolicy:)","doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/unregister(_:)"]},{"generated":true,"title":"Default Implementations","anchor":"Default-Implementations","identifiers":["doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/Actor-Implementations"]}],"kind":"symbol","hierarchy":{"paths":[["doc:\/\/PipelineKit\/documentation\/PipelineKit"]]},"references":{"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/register(_:handler:)":{"role":"symbol","title":"register(_:handler:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"register"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"H"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":".Type, "},{"kind":"externalParam","text":"handler"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"H"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"}],"url":"\/documentation\/pipelinekit\/dynamicpipeline\/register(_:handler:)","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Registers a command handler for a specific command type."}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/register(_:handler:)"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/hasMiddleware(ofType:)":{"role":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/hasMiddleware(ofType:)","kind":"symbol","title":"hasMiddleware(ofType:)","abstract":[],"url":"\/documentation\/pipelinekit\/dynamicpipeline\/hasmiddleware(oftype:)","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"hasMiddleware","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"ofType","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":".Type) -> ","kind":"text"},{"text":"Bool","kind":"typeIdentifier","preciseIdentifier":"s:Sb"}]},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/hasHandler(for:)":{"title":"hasHandler(for:)","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"hasHandler","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"for","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":".Type) ","kind":"text"},{"text":"async","kind":"keyword"},{"kind":"text","text":" -> "},{"preciseIdentifier":"s:Sb","kind":"typeIdentifier","text":"Bool"}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/hasHandler(for:)","abstract":[],"kind":"symbol","url":"\/documentation\/pipelinekit\/dynamicpipeline\/hashandler(for:)","role":"symbol"},"doc://PipelineKit/s8SendableP":{"type":"unresolvable","identifier":"doc:\/\/PipelineKit\/s8SendableP","title":"Swift.Sendable"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/send(_:context:retryPolicy:)":{"abstract":[{"text":"Sends a command through the bus for execution.","type":"text"}],"title":"send(_:context:retryPolicy:)","role":"symbol","url":"\/documentation\/pipelinekit\/dynamicpipeline\/send(_:context:retrypolicy:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"send"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":", "},{"kind":"externalParam","text":"context"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CommandContext","preciseIdentifier":"s:15PipelineKitCore14CommandContextC"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"retryPolicy"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"RetryPolicy","preciseIdentifier":"s:15PipelineKitCore11RetryPolicyV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Result","preciseIdentifier":"s:15PipelineKitCore7CommandP6ResultQa"}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/send(_:context:retryPolicy:)","type":"topic","kind":"symbol"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/registerOnce(_:handler:)":{"type":"topic","role":"symbol","title":"registerOnce(_:handler:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"registerOnce"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"H"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":".Type, "},{"kind":"externalParam","text":"handler"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"H"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"kind":"symbol","abstract":[{"type":"text","text":"Registers a handler only if none exists for the given command type."}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/registerOnce(_:handler:)","url":"\/documentation\/pipelinekit\/dynamicpipeline\/registeronce(_:handler:)"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/addMiddlewares(_:)":{"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"addMiddlewares","kind":"identifier"},{"text":"([any ","kind":"text"},{"text":"Middleware","kind":"typeIdentifier","preciseIdentifier":"s:15PipelineKitCore10MiddlewareP"},{"text":"]) ","kind":"text"},{"text":"throws","kind":"keyword"}],"type":"topic","url":"\/documentation\/pipelinekit\/dynamicpipeline\/addmiddlewares(_:)","abstract":[{"type":"text","text":"Adds multiple middleware to the command bus at once."}],"title":"addMiddlewares(_:)","role":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/addMiddlewares(_:)","kind":"symbol"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/middlewareCount":{"fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"middlewareCount"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Si","text":"Int"}],"type":"topic","url":"\/documentation\/pipelinekit\/dynamicpipeline\/middlewarecount","abstract":[],"title":"middlewareCount","role":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/middlewareCount","kind":"symbol"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/unregister(_:)":{"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/unregister(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"unregister"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":".Type) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"kind":"symbol","title":"unregister(_:)","url":"\/documentation\/pipelinekit\/dynamicpipeline\/unregister(_:)","type":"topic","role":"symbol","abstract":[{"type":"text","text":"Unregisters any handler for the given command type; returns whether one was removed."}]},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/Actor-Implementations":{"url":"\/documentation\/pipelinekit\/dynamicpipeline\/actor-implementations","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/Actor-Implementations","type":"topic","kind":"article","title":"Actor Implementations","role":"collectionGroup","abstract":[]},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline":{"title":"DynamicPipeline","type":"topic","url":"\/documentation\/pipelinekit\/dynamicpipeline","role":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline","fragments":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DynamicPipeline","kind":"identifier"}],"abstract":[{"type":"text","text":"A thread-safe dynamic pipeline that routes commands to their handlers with middleware support."}],"kind":"symbol","navigatorTitle":[{"text":"DynamicPipeline","kind":"identifier"}]},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/middlewareTypes":{"role":"symbol","type":"topic","url":"\/documentation\/pipelinekit\/dynamicpipeline\/middlewaretypes","title":"middlewareTypes","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"middlewareTypes"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"]"}],"kind":"symbol","abstract":[],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/middlewareTypes"},"doc://PipelineKit/documentation/PipelineKit":{"role":"collection","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit","title":"PipelineKit","url":"\/documentation\/pipelinekit","abstract":[],"type":"topic","kind":"symbol"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/registeredCommandTypes":{"title":"registeredCommandTypes","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"registeredCommandTypes"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"]"}],"abstract":[],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/registeredCommandTypes","type":"topic","url":"\/documentation\/pipelinekit\/dynamicpipeline\/registeredcommandtypes","role":"symbol","kind":"symbol"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/clear()":{"url":"\/documentation\/pipelinekit\/dynamicpipeline\/clear()","abstract":[],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/clear()","title":"clear()","type":"topic","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"clear"},{"kind":"text","text":"() "},{"kind":"keyword","text":"async"}],"role":"symbol","kind":"symbol"},"doc://PipelineKit/ScA":{"title":"_Concurrency.Actor","type":"unresolvable","identifier":"doc:\/\/PipelineKit\/ScA"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/addMiddleware(_:)":{"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addMiddleware"},{"kind":"text","text":"(any "},{"kind":"typeIdentifier","text":"Middleware","preciseIdentifier":"s:15PipelineKitCore10MiddlewareP"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/addMiddleware(_:)","abstract":[{"text":"Adds a single middleware to the command bus.","type":"text"}],"url":"\/documentation\/pipelinekit\/dynamicpipeline\/addmiddleware(_:)","type":"topic","kind":"symbol","title":"addMiddleware(_:)"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/replace(_:with:)":{"url":"\/documentation\/pipelinekit\/dynamicpipeline\/replace(_:with:)","kind":"symbol","type":"topic","abstract":[{"text":"Replaces the handler for a command type; returns whether a previous handler existed.","type":"text"}],"role":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/replace(_:with:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"replace"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"H"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":".Type, "},{"kind":"externalParam","text":"with"},{"text":": ","kind":"text"},{"text":"H","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"Bool","preciseIdentifier":"s:Sb","kind":"typeIdentifier"}],"title":"replace(_:with:)"},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/init()":{"type":"topic","url":"\/documentation\/pipelinekit\/dynamicpipeline\/init()","role":"symbol","abstract":[{"text":"Creates a new command bus.","type":"text"}],"kind":"symbol","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/init()","title":"init()","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"()"}]},"doc://PipelineKit/documentation/PipelineKit/DynamicPipeline/clearMiddlewares()":{"kind":"symbol","abstract":[],"role":"symbol","type":"topic","identifier":"doc:\/\/PipelineKit\/documentation\/PipelineKit\/DynamicPipeline\/clearMiddlewares()","url":"\/documentation\/pipelinekit\/dynamicpipeline\/clearmiddlewares()","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"clearMiddlewares","kind":"identifier"},{"text":"()","kind":"text"}],"title":"clearMiddlewares()"}}}